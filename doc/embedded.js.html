<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: embedded.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: embedded.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @overview The Embedded JavaScript API Reference
 *
 * &lt;p>This reference described the exported REST API for embedded web
 * browser to interact with native application.&lt;/p>
 *
 * &lt;p>Usage:&lt;/p>
 * &lt;pre>
 * &amp;lt;script type="text/javascript" src="/1.0/embedded.js"&amp;gt;&amp;lt;script&amp;gt;
 * &lt;/pre>
 *
 * @version 1.0
 * @auther Johnson Lee &lt;g.johnsonlee@gmail.com>
 */
(function(global) {

    var ajax = function(url, options) {
        var self = this;
        var opt = {
            success : options.success || function() {
                console.log('Request ' + url + ' success');
            },
            error : options.error || function(e) {
                console.error(e.stack || e.message || e);
            },
        };
        var xhr = new XMLHttpRequest();

        try {
            xhr.open('GET', url);
            xhr.onreadystatechange = function() {
                if (this.readyState !== 4) {
                    return;
                }

                if (this.responseText) {
                    opt.success.call(self, JSON.parse(this.responseText));
                } else {
                    opt.success.call(self);
                }
            };
            xhr.send();
        } catch (e) {
            opt.error.call(self, e);
        }
    };

    var VERSION_1_0 = '/embapi/1.0';

    /**
     * &lt;p>The following example shows how to retrieve the current user:&lt;/p>
     * &lt;pre>
     * embapi.getUser({
     *     success : function(user) {
     *         console.log(JSON.stringify(user));
     *     },
     *     error : function(e) {
     *         console.log(e.stack || e.message);
     *     },
     * });
     * &lt;/pre>
     *
     * @namespace embapi
     */
    global.embapi = global.embapi || {

        /**
         * Retrieve the agent information
         *
         * @param options {Object}
         *        A backbone-style options
         * @memberof embapi
         * @see Agent
         */
        getAgent : function(options) {
            return ajax.call(this, VERSION_1_0 + '/agent', options || {});
        },

        /**
         * Retrieve the current user
         *
         * @param options {Object}
         *        A backbone-style options
         * @memberof embapi
         * @see User
         */
        getUser : function(options) {
            return ajax.call(this, VERSION_1_0 + '/user', options || {});
        },

        /**
         * Retrieve the current device
         *
         * @param options {Object}
         *        A backbone-style options
         * @see Device
         * @memberof embapi
         */
        getDevice : function(options) {
            return ajax.call(this, VERSION_1_0 + '/device', options || {});
        },

        /**
         * Retrieve the active network
         *
         * @param options {Object}
         *        A backbone-style options
         * @see Network
         * @memberof embapi
         */
        getActiveNetwork : function(options) {
            return ajax.call(this, VERSION_1_0 + '/connectivity/network', options || {});
        },

        /**
         * Open the specified URI
         *
         * @param uri {String}
         *        The target url
         * @param options {Object}
         *        A backbone-style options
         * @memberof embapi
         */
        open : function(uri, params, options) {
            var args = Object.keys(params || {}).map(function(k) {
                return k + '=' + encodeURIComponent(params[k] || '');
            }).push('uri=' + encodeURIComponent(uri || '')).join('&amp;');
            return ajax.call(this, VERSION_1_0 + '/open?' + args, options || {});
        },

    };

})(this);

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Agent.html">Agent</a></li><li><a href="Device.html">Device</a></li><li><a href="Network.html">Network</a></li><li><a href="User.html">User</a></li></ul><h3>Namespaces</h3><ul><li><a href="embapi.html">embapi</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-beta1</a> on Wed Jul 22 2015 19:37:11 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
